[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "A propos du projet",
    "section": "",
    "text": "En ce premier novembre pluvieux, puisque le PDF du cachier technique de la DSN a l’air relativement structuré mais lourd à prendre en main, pourquoi ne pas développer une API pour récupérer le contenu utile ?"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "API d’extraction d’infos de la DSN",
    "section": "",
    "text": "APIroot = \"https://specif-dsn.lab.sspcloud.fr\"\n\n\n\n\n\n\n\nliste_codes = d3.json(`${APIroot}/liste_rubriques?annee=${annee}`)\n\n\n\n\n\n\n\nAPI d’extraction d’infos de la DSN\nUne extraction bête et méchante du contenu du manuel technique 2025 de la DSN, un magnifique PDF de 400 pages.\n\n\n\n\n\n\nTipBientôt\n\n\n\n\n\n\nDe l’IA sur les titres de rubriques et description pour rendre la recherche plus intelligente.\nChoix des années\n\n\n\n\n\nviewof annee = Inputs.radio(\n  [\"2022\", \"2023\", \"2024\", \"2025\"],\n  {label: \"Année\", value: \"2025\"}\n)\n\n\n\n\n\n\n\nviewof codeDSN = Inputs.text({\n  label: \"Code technique DSN\",\n  placeholder: \"Entrer un code avec l'aide de l'autocomplétion\",\n  value: liste_codes['codes'][0],\n  datalist: liste_codes['codes']\n})\n\n\n\n\n\n\n\n\nurlCahierTechnique = `${APIroot}/cahier-technique/url?annee=${annee}`\nd3.json(urlCahierTechnique)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewBlock = html`\n  &lt;div style=\"\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\n    gap: 1.5rem;\n    align-items: stretch; /* ✅ étire les deux colonnes à la même hauteur */\n    width: 100%;\n    box-sizing: border-box;\n  \"&gt;\n    &lt;div style=\"padding: 1rem; border-radius: 8px;\"&gt;\n      ${renderedBlocks}\n    &lt;/div&gt;\n    &lt;div style=\"\n      padding: 1rem; \n      display: flex; \n      flex-direction: column;\n    \"&gt;\n      &lt;iframe \n        src=\"${urlCahierTechnique}#page=${content.data.page}\" \n        width=\"100%\" \n        style=\"flex: 1; border: none;\"\n      &gt;&lt;/iframe&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n`\n\n\n\n\n\n\n\n\ncontent = d3.json(`https://specif-dsn.lab.sspcloud.fr/check/${codeDSN}?annee=2025`)\n\n\n\n\n\n\n\nmarkdown_modalite = {\n  // 1️⃣ On sécurise l’accès à la donnée\n  const modalites = content?.data?.modalites;\n\n  // 2️⃣ On vérifie que c’est un tableau\n  if (!Array.isArray(modalites) || modalites.length === 0) {\n    return html`&lt;p style=\"color:#888;\"&gt;Aucune modalité disponible.&lt;/p&gt;`;\n  }\n\n  // 3️⃣ On crée les lignes HTML à partir du tableau\n  const rows = modalites.map(\n    ([code, label]) =&gt; html`&lt;tr&gt;&lt;td style=\"text-align:center;\"&gt;${code}&lt;/td&gt;&lt;td&gt;${label}&lt;/td&gt;&lt;/tr&gt;`\n  );\n\n  // 4️⃣ On assemble le tout dans un tableau stylé\n  const tableHTML = html`\n    &lt;table style=\"border-collapse:collapse; width:100%; margin-top:1em; font-family:sans-serif;\"&gt;\n      &lt;caption style=\"font-weight:bold; padding:0.5em; caption-side:top; text-align:left;\"&gt;\n        Liste des modalités\n      &lt;/caption&gt;\n      &lt;thead style=\"background:#444; color:white;\"&gt;\n        &lt;tr&gt;\n          &lt;th style=\"text-align:center; padding:0.5em;\"&gt;Code&lt;/th&gt;\n          &lt;th style=\"text-align:left; padding:0.5em;\"&gt;Libellé&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      &lt;tbody&gt;\n        ${rows}\n      &lt;/tbody&gt;\n    &lt;/table&gt;\n  `;\n\n  return tableHTML;\n}\n\n\n\n\n\n\n\nrenderedBlocks = md`\n ### ${content.data.nom_champ} (\\`${content.data.code}\\`)\n \n **Nom technique** : \\`${content.data.nom_technique}\\`\n  \n  ${content.data.description}\n\n  ${markdown_modalite}\n\n  &lt;details&gt;\n\n  &lt;summary&gt;\n  Détails supplémentaires de la rubrique\n  &lt;/summary&gt;\n\n  _${content.data.controles}_\n\n  &lt;/details&gt;\n\n  ${copy_button}\n`\n\n\n\n\n\n\n\npbcopy = text =&gt; navigator.clipboard.writeText(text)\nfunction Copier(content = \"Copy code\", options) {\n  if (Array.isArray(content)) content = Array.from(content, ([key, value]) =&gt; [key, () =&gt; (pbcopy(value), value)]);\n  return Inputs.button(content, {...options, reduce: (value) =&gt; (pbcopy(value), value)});\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncopy_button = Copier(\"Copier la sortie en JSON\", {value: `${JSON.stringify(content.data, null, 2)}`})"
  }
]