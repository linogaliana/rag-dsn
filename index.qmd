---
title: "API d'extraction d'infos de la DSN"
echo: false
---


```{ojs}
liste_codes = d3.json("https://specif-dsn.lab.sspcloud.fr/liste_rubriques")
```

Une extraction bête et méchante du contenu du manuel technique 2024 de la DSN, un magnifique PDF de 400 pages. 

Bientôt de l'IA sur les titres de rubriques et description pour rendre la recherche plus intelligente. Et une plus jolie mise en forme du contenu des rubriques pour rendre ce contenu plus utile. 


```{ojs}
viewof codeDSN = Inputs.text({
  label: "Code technique DSN",
  placeholder: "Entrer un code avec l'aide de l'autocomplétion",
  value: liste_codes['codes'][0],
  datalist: liste_codes['codes']
})
```


```{ojs}
content = d3.json(`https://specif-dsn.lab.sspcloud.fr/check/${codeDSN}`)
```



```{ojs}
md`
 ### ${content.data.nom_champ} (\`${content.data.code}\`)
 
 **Nom technique** : \`${content.data.nom_technique}\`
  
  ${content.data.description}
`
```


```{ojs}
//import {Copier} from "@mbostock/copier"
pbcopy = text => navigator.clipboard.writeText(text)
function Copier(content = "Copy code", options) {
  if (Array.isArray(content)) content = Array.from(content, ([key, value]) => [key, () => (pbcopy(value), value)]);
  return Inputs.button(content, {...options, reduce: (value) => (pbcopy(value), value)});
}
```

```{ojs}
Copier("Copier la sortie en JSON", {value: `${JSON.stringify(content.data, null, 2)}`})
``` 




